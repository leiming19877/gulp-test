define("app",["module_purchase/bid/bidTab.js","module_purchase/bid/pageScroller.js"],function(e,i,a){e("module_purchase/bid/bidTab.js"),e("module_purchase/bid/pageScroller.js")}),define("module_purchase/bid/bidTab.js",["zepto.js","module_purchase/bid/pageScroller.js"],function(e,i,a){var t=e("zepto"),n=e("module_purchase/bid/pageScroller.js"),s=t("#bid-tab");s.on("tap",".weui_navbar_item",function(e){var i=t(this);i.siblings(".weui_bar_item_on").removeClass("weui_bar_item_on"),i.addClass("weui_bar_item_on");var a=i.data("queryType");n.showQueryType(a)}),a.exports={}}),define("module_purchase/bid/pageScroller.js",["zepto.js","module_common/Date.js","module_common/loadingToast.js","dot.js","iscroll.js","module_purchase/bid/bidingList.html","module_purchase/bid/prepareBidList.html","module_purchase/bid/overBidList.html"],function(e,i,a){function t(){L=new w("wrapper",{useTransition:!0,topOffset:x,onRefresh:function(){v.className.match("loading")?(v.className="",v.querySelector(".pullDownLabel").innerHTML="下拉更新..."):T.className.match("loading")&&(T.className="",T.querySelector(".pullUpLabel").innerHTML="上拉加载...")},onScrollMove:function(){this.y>5&&!v.className.match("flip")?(v.className="flip",v.querySelector(".pullDownLabel").innerHTML="松手开始更新...",this.minScrollY=0):this.y<5&&v.className.match("flip")?(v.className="",v.querySelector(".pullDownLabel").innerHTML="下拉更新...",this.minScrollY=-x):this.y<-(S+55)&&this.y<this.maxScrollY-55&&!T.className.match("flip")?(T.className="flip",T.querySelector(".pullUpLabel").innerHTML="松手开始更新...",this.maxScrollY=this.maxScrollY):this.y<-(S+55)&&this.y>this.maxScrollY+55&&T.className.match("flip")&&(T.className="",T.querySelector(".pullUpLabel").innerHTML="上拉加载...",this.maxScrollY=S)},onScrollEnd:function(){v.className.match("flip")?(v.className="loading",v.querySelector(".pullDownLabel").innerHTML="加载中...",q()):T.className.match("flip")&&(T.className="loading",T.querySelector(".pullUpLabel").innerHTML="加载中...",D())}})}function n(e){var i=o("pageNo")||1,a=o("pageCount")||0;if(!e&&i>=a)return T.className="",void(T.querySelector(".pullUpLabel").innerHTML="没有更多记录...");e?i=1:i++;var t=c();g.ajax({dataType:"json",url:"../../central/bidConsole/bidListData",data:{queryType:f,pageno:i,rowsize:t,_t:(new Date).getTime()},success:function(e,a,t){switch(f){case p:l(j,I,i,e);break;case m:l(H,C,i,e);break;case h:l(N,B,i,e)}},error:function(e,i,a){T.querySelector(".pullUpLabel").innerHTML="加载失败..."}})}function s(){if(!d()){var e=1,i=c();y.show("数据加载中"),g.ajax({dataType:"json",url:"../../central/bidConsole/bidListData",data:{queryType:f,pageno:e,rowsize:i,_t:(new Date).getTime()},success:function(i,a,t){switch(f){case p:l(j,I,e,i);break;case m:l(H,C,e,i);break;case h:l(N,B,e,i)}y.hide()},error:function(e,i,a){y.show("数据加载中错，请重新试试")}})}}function l(e,i,a,t){if(e.data("pageCount",t.page.total),e.data("pageNo",a),1==a&&e.find("ul.list").empty(),0==t.page.totalrows)return v.className.match("loading")&&(v.className="",v.querySelector(".pullDownLabel").innerHTML="下拉更新..."),e.addClass("empty"),void(L&&L.refresh());e.removeClass("empty");var n=_.template(i),s=n(t);e.find("ul.list").append(s),L&&L.refresh()}function r(){var e=g("#wrapper").height();g(".no-recording").height(e).css("line-height",e+"px")}function d(){var e=o("pageNo");return"undefined"!=typeof e}function o(e){switch(f){case p:return j.data(e);case m:return H.data(e);case h:return N.data(e)}}function c(){switch(f){case p:return 3;case m:return 4;case h:return 7;default:return u}}function b(e){switch(f=e,e){case p:H.hide(),N.hide(),j.show(),L.refresh();break;case m:j.hide(),N.hide(),H.show(),L.refresh();break;case h:j.hide(),H.hide(),N.show(),L.refresh()}s()}var u=4,p="biding",m="prepareBid",h="overBid",f=p,g=e("zepto");e("module_common/Date.js");var y=e("module_common/loadingToast.js"),_=e("dot"),w=e("iscroll"),v=document.getElementById("pullDown"),x=v.offsetHeight,T=document.getElementById("pullUp"),S=T.offsetHeight,L=null,q=function(){n(!0)},D=function(){n()},M=g("#tab-content"),j=g("#biding"),H=g("#prepare-bid"),N=g("#over-bid"),I=e("module_purchase/bid/bidingList.html"),C=e("module_purchase/bid/prepareBidList.html"),B=e("module_purchase/bid/overBidList.html");M.on("tap","li.line",function(e){var i=e.target||e.srcElement;if(i=g(i),!i.hasClass("join-bid-btn")&&!i.hasClass("history-quote-btn")){var a=g(this),t=a.attr("data-bid-id");y.show("数据加载中"),window.location.href="bidDetailPage?bidId="+t}}),M.on("tap",".weui_btn",function(e){y.show("数据加载中")}),g(document).ready(function(){r(),s(),setTimeout(t,200)}),a.exports={showQueryType:b}}),define("module_common/Date.js",[],function(e,i,a){Date.prototype.formatDate=function(e){var i={"y+":this.getFullYear(),"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()},a=e;for(var t in i)a=a.replace(new RegExp("("+t+")"),function(e){if(/y+/.test(e)){var a=e.length>4?4:e.length;return(""+i[t]).substr(4-a)}return 1==e.length?i[t]:("00"+i[t]).substr((""+i[t]).length)});return a}}),define("module_common/loadingToast.js",["zepto.js"],function(e,i,a){function t(e){r.text(e),l.show()}function n(){l.hide()}var s=e("zepto"),l=s("#loading-toast"),r=l.find(".weui_toast_content");a.exports={show:t,hide:n}}),define("module_purchase/bid/bidingList.html",[],function(e,i,a){a.exports='{{~it.page.list :bid}}\r\n    <li class="line" data-bid-id="{{=bid.bidId}}">\r\n       <div class="txt-line">\r\n         <label class="lab">竞价单号：</label>\r\n         <span class="txt" >{{=bid.bidCode}}</span>      \r\n       </div>\r\n       <div class="txt-line">\r\n         <label class="lab">竞价时间：</label>\r\n       	 <span  class="txt" >{{=new Date(bid.bidBeginTime).formatDate("yyyy-MM-dd HH:mm")}}<br/>至<br/>{{=new Date(bid.bidEndTime).formatDate("yyyy-MM-dd HH:mm")}}</span>\r\n       </div>\r\n       <div class="txt-line">\r\n         <label class="lab">可报次数：</label>\r\n         <span class="txt" >{{=(bid.bidTime == 0 ?\'不限\':bid.bidTime) }}次</span>\r\n       </div>\r\n       <div class="txt-line">\r\n         <label class="lab">已报次数：</label>\r\n         <span class="txt" >{{=it.quoteSns[bid.bidId]}}次</span>                   \r\n         <span class="ranking">上轮报价排名：{{=it.ranks[bid.bidId]}}</span>\r\n       </div>\r\n       <div class="txt-line">\r\n         <label class="lab">重量合计：</label>\r\n         <span class="txt" >计划量共<em class="f-red">{{=bid.bidTotalWeight }}</em>吨  </span>\r\n       </div>\r\n       {{?it.canQuotes[bid.bidId]}}\r\n       <a href="../quote/toQuote?bidId={{=bid.bidId}}" class="join-bid-btn weui_btn weui_btn_mini weui_btn_primary" >参与报价</a>\r\n       {{?}}\r\n       {{?it.quoteSns[bid.bidId]>0}}\r\n       <a href="../quote/toQuoteDetail?bidId={{=bid.bidId}}&quoteSn={{=it.quoteSns[bid.bidId]}}" class="history-quote-btn weui_btn weui_btn_mini weui_btn_primary" >查看报价单</a>\r\n       {{?}}\r\n    </li>\n{{~}}    '}),define("module_purchase/bid/prepareBidList.html",[],function(e,i,a){a.exports='{{~it.page.list :bid}}\r\n    <li class="line" data-bid-id="{{=bid.bidId}}">\r\n       <div class="txt-line">\r\n         <label class="lab">竞价单号：</label>\r\n         <span class="txt" >{{=bid.bidCode}}</span>    \r\n        </div>\r\n       <div class="txt-line">\r\n         <label class="lab">竞价时间：</label>\r\n         <span  class="txt" >{{=new Date(bid.bidBeginTime).formatDate("yyyy-MM-dd HH:mm")}}<br/>至<br/>{{=new Date(bid.bidEndTime).formatDate("yyyy-MM-dd HH:mm")}}</span>\r\n      </div>\r\n	  <div class="txt-line">\r\n         <label class="lab">可报次数：</label>\r\n         <span class="txt">{{=(bid.bidTime == 0 ?\'不限\':bid.bidTime) }}次</span>\r\n       </div>\r\n       <div class="txt-line">\r\n         <label class="lab">重量合计：</label>\r\n         <span class="txt" >计划量共<em class="f-red">{{=bid.bidTotalWeight }}</em>吨  </span>\r\n       </div>\r\n    </li>\n{{~}}       '}),define("module_purchase/bid/overBidList.html",[],function(e,i,a){a.exports='{{~it.page.list :bid}}\r\n    <li class="line" data-bid-id="{{=bid.bidId}}">\r\n       <div class="txt-line">\r\n            <span style="margin-left: 0px;line-height: 40px;">竞价单号：[{{=bid.bidCode}}]已结束</span>\r\n       </div>\r\n       <div class="txt-line">\r\n         <span class="ranking" style="margin-left: 0px;line-height: 40px;">\r\n                                  您的报价最终排名：{{=it.ranks[bid.bidId]}}\r\n          </span>\r\n       </div>\r\n       {{?it.quoteSns[bid.bidId]>0}}\r\n       <a href="../quote/toQuoteDetail?bidId={{=bid.bidId}}&quoteSn={{=it.quoteSns[bid.bidId]}}" class="history-quote-btn history-quote-btn2 weui_btn weui_btn_mini weui_btn_primary" >查看报价单</a>\r\n       {{?}}\r\n    </li>\n{{~}}        '});