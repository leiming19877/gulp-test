define("app",["module_purchase/bid/bidTab.js","module_purchase/bid/pageScroller.js"],function(e,i,t){e("module_purchase/bid/bidTab.js"),e("module_purchase/bid/pageScroller.js")}),define("module_purchase/bid/bidTab.js",["zepto.js","module_purchase/bid/pageScroller.js"],function(e,i,t){var n=e("zepto"),a=e("module_purchase/bid/pageScroller.js"),s=n("#bid-tab");s.on("tap",".weui_navbar_item",function(e){var i=n(this);i.siblings(".weui_bar_item_on").removeClass("weui_bar_item_on"),i.addClass("weui_bar_item_on");var t=i.data("queryType");a.showQueryType(t)}),t.exports={}}),define("module_purchase/bid/pageScroller.js",["zepto.js","module_common/Date.js","module_common/loadingToast.js","dot.js","iscroll.js","module_purchase/bid/bidingList.html","module_purchase/bid/prepareBidList.html","module_purchase/bid/overBidList.html"],function(e,i,t){function n(){S=new _("wrapper",{useTransition:!0,topOffset:x,onRefresh:function(){w.className.match("loading")?(w.className="",w.querySelector(".pullDownLabel").innerHTML="下拉更新..."):T.className.match("loading")&&(T.className="",T.querySelector(".pullUpLabel").innerHTML="上拉加载...")},onScrollMove:function(){this.y>5&&!w.className.match("flip")?(w.className="flip",w.querySelector(".pullDownLabel").innerHTML="松手开始更新...",this.minScrollY=0):this.y<5&&w.className.match("flip")?(w.className="",w.querySelector(".pullDownLabel").innerHTML="下拉更新...",this.minScrollY=-x):this.y<-(D+55)&&this.y<this.maxScrollY-55&&!T.className.match("flip")?(T.className="flip",T.querySelector(".pullUpLabel").innerHTML="松手开始更新...",this.maxScrollY=this.maxScrollY):this.y<-(D+55)&&this.y>this.maxScrollY+55&&T.className.match("flip")&&(T.className="",T.querySelector(".pullUpLabel").innerHTML="上拉加载...",this.maxScrollY=D)},onScrollEnd:function(){w.className.match("flip")?(w.className="loading",w.querySelector(".pullDownLabel").innerHTML="加载中...",q()):T.className.match("flip")&&(T.className="loading",T.querySelector(".pullUpLabel").innerHTML="加载中...",L())}})}function a(e){var i=o("pageNo")||1,t=o("pageCount")||0;if(!e&&i>=t)return T.className="",void(T.querySelector(".pullUpLabel").innerHTML="没有更多记录...");e?i=1:i++;var n=b();g.ajax({dataType:"json",url:"../../central/bidConsole/bidListData",data:{queryType:f,pageno:i,rowsize:n,_t:(new Date).getTime()},success:function(e,t,n){switch(f){case m:r(M,N,i,e);break;case p:r(I,B,i,e);break;case h:r(H,C,i,e)}},error:function(e,i,t){T.querySelector(".pullUpLabel").innerHTML="加载失败..."}})}function s(){if(!d()){var e=1,i=b();y.show("数据加载中"),g.ajax({dataType:"json",url:"../../central/bidConsole/bidListData",data:{queryType:f,pageno:e,rowsize:i,_t:(new Date).getTime()},success:function(i,t,n){switch(f){case m:r(M,N,e,i);break;case p:r(I,B,e,i);break;case h:r(H,C,e,i)}y.hide()},error:function(e,i,t){y.show("数据加载中错，请重新试试")}})}}function r(e,i,t,n){if(e.data("pageCount",n.page.total),e.data("pageNo",t),1==t&&e.find("ul.list").empty(),0==n.page.totalrows)return w.className.match("loading")&&(w.className="",w.querySelector(".pullDownLabel").innerHTML="下拉更新..."),e.addClass("empty"),void(S&&S.refresh());e.removeClass("empty");var a=v.template(i),s=a(n);e.find("ul.list").append(s),S&&S.refresh()}function l(){var e=g("#wrapper").height();g(".no-recording").height(e).css("line-height",e+"px")}function d(){var e=o("pageNo");return"undefined"!=typeof e}function o(e){switch(f){case m:return M.data(e);case p:return I.data(e);case h:return H.data(e)}}function b(){switch(f){case m:return 3;case p:return 4;case h:return 7;default:return u}}function c(e){switch(f=e,e){case m:I.hide(),H.hide(),M.show(),S.refresh();break;case p:M.hide(),H.hide(),I.show(),S.refresh();break;case h:M.hide(),I.hide(),H.show(),S.refresh()}s()}var u=4,m="biding",p="prepareBid",h="overBid",f=m,g=e("zepto");e("module_common/Date.js");var y=e("module_common/loadingToast.js"),v=e("dot"),_=e("iscroll"),w=document.getElementById("pullDown"),x=w.offsetHeight,T=document.getElementById("pullUp"),D=T.offsetHeight,S=null,q=function(){a(!0)},L=function(){a()},j=g("#tab-content"),M=g("#biding"),I=g("#prepare-bid"),H=g("#over-bid"),N=e("module_purchase/bid/bidingList.html"),B=e("module_purchase/bid/prepareBidList.html"),C=e("module_purchase/bid/overBidList.html");j.on("tap","li.line",function(e){var i=e.target||e.srcElement;if(i=g(i),!i.hasClass("join-bid-btn")&&!i.hasClass("history-quote-btn")){var t=g(this),n=t.attr("data-bid-id");y.show("数据加载中"),window.location.href="bidDetailPage?bidId="+n}}),j.on("tap",".weui_btn",function(e){y.show("数据加载中")}),g(document).ready(function(){l(),s(),setTimeout(n,200)}),t.exports={showQueryType:c}}),define("module_common/Date.js",[],function(e,i,t){Date.prototype.formatDate=function(e){var i={"y+":this.getFullYear(),"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()},t=e;for(var n in i)t=t.replace(new RegExp("("+n+")"),function(e){if(/y+/.test(e)){var t=e.length>4?4:e.length;return(""+i[n]).substr(4-t)}return 1==e.length?i[n]:("00"+i[n]).substr((""+i[n]).length)});return t}}),define("module_common/loadingToast.js",["zepto.js"],function(e,i,t){function n(e){l.text(e),r.show()}function a(){r.hide()}var s=e("zepto"),r=s("#loading-toast"),l=r.find(".weui_toast_content");t.exports={show:n,hide:a}}),define("module_purchase/bid/bidingList.html",[],function(e,i,t){t.exports='{{~it.page.list :bid}}\r\n    <li class="line" data-bid-id="{{=bid.bidId}}">\r\n       <div class="txt-line">\r\n         <label class="lab">竞价单号：</label>\r\n         <span class="txt" >{{=bid.bidCode}}</span>      \r\n       </div>\r\n       <div class="txt-line">\r\n         <label class="lab">竞价时间：</label>\r\n       	 <span  class="txt" >{{=new Date(bid.bidBeginTime).formatDate("yyyy-MM-dd HH:mm")}}<br/>至<br/>{{=new Date(bid.bidEndTime).formatDate("yyyy-MM-dd HH:mm")}}</span>\r\n       </div>\r\n       <div class="txt-line">\r\n         <label class="lab">可报次数：</label>\r\n         <span class="txt" >{{=(bid.bidTime == 0 ?\'不限\':bid.bidTime) }}次</span>\r\n       </div>\r\n       <div class="txt-line">\r\n         <label class="lab">已报次数：</label>\r\n         <span class="txt" >{{=it.quoteSns[bid.bidId]}}次</span>                   \r\n         <span class="ranking">上轮报价排名：{{=it.ranks[bid.bidId]}}</span>\r\n       </div>\r\n       <div class="txt-line">\r\n         <label class="lab">重量合计：</label>\r\n         <span class="txt" >计划量共<em class="f-red">{{=bid.bidTotalWeight }}</em>吨  </span>\r\n       </div>\r\n       {{?it.canQuotes[bid.bidId]}}\r\n       <a href="../quote/toQuote?bidId={{=bid.bidId}}" class="join-bid-btn weui_btn weui_btn_mini weui_btn_primary" >参与报价</a>\r\n       {{?}}\r\n       {{?it.quoteSns[bid.bidId]>0}}\r\n       <a href="../quote/toQuoteDetail?bidId={{=bid.bidId}}&quoteSn={{=it.quoteSns[bid.bidId]}}" class="history-quote-btn weui_btn weui_btn_mini weui_btn_primary" >查看报价单</a>\r\n       {{?}}\r\n    </li>\n{{~}}    '}),define("module_purchase/bid/prepareBidList.html",[],function(e,i,t){t.exports='{{~it.page.list :bid}}\r\n    <li class="line" data-bid-id="{{=bid.bidId}}">\r\n       <div class="txt-line">\r\n         <label class="lab">竞价单号：</label>\r\n         <span class="txt" >{{=bid.bidCode}}</span>    \r\n        </div>\r\n       <div class="txt-line">\r\n         <label class="lab">竞价时间：</label>\r\n         <span  class="txt" >{{=new Date(bid.bidBeginTime).formatDate("yyyy-MM-dd HH:mm")}}<br/>至<br/>{{=new Date(bid.bidEndTime).formatDate("yyyy-MM-dd HH:mm")}}</span>\r\n      </div>\r\n	  <div class="txt-line">\r\n         <label class="lab">可报次数：</label>\r\n         <span class="txt">{{=(bid.bidTime == 0 ?\'不限\':bid.bidTime) }}次</span>\r\n       </div>\r\n       <div class="txt-line">\r\n         <label class="lab">重量合计：</label>\r\n         <span class="txt" >计划量共<em class="f-red">{{=bid.bidTotalWeight }}</em>吨  </span>\r\n       </div>\r\n    </li>\n{{~}}       '}),define("module_purchase/bid/overBidList.html",[],function(e,i,t){t.exports='{{~it.page.list :bid}}\r\n    <li class="line" data-bid-id="{{=bid.bidId}}">\r\n       <div class="txt-line">\r\n            <span style="margin-left: 0px;line-height: 40px;">竞价单号：[{{=bid.bidCode}}]已结束</span>\r\n       </div>\r\n       <div class="txt-line">\r\n         <span class="ranking" style="margin-left: 0px;line-height: 40px;">\r\n                                  您的报价最终排名：{{=it.ranks[bid.bidId]}}\r\n          </span>\r\n       </div>\r\n       {{?it.quoteSns[bid.bidId]>0}}\r\n       <a href="../quote/toQuoteDetail?bidId={{=bid.bidId}}&quoteSn={{=it.quoteSns[bid.bidId]}}" class="history-quote-btn history-quote-btn2 weui_btn weui_btn_mini weui_btn_primary" >查看报价单</a>\r\n       {{?}}\r\n    </li>\n{{~}}        '}),define("app",["zepto.js","dot.js","module_common/Date.js","module_common/loadingToast.js","module_purchase/bid/bidDetail.html"],function(e,i,t){function n(){var e=/https?:\/\/[^\/]+\/[^\?]*?\?bidId=(\d*)/g,i=window.location.href,t=e.exec(i);return t&&2==t.length?t[1]:0}var a=e("zepto"),s=e("dot");e("module_common/Date.js");var r=e("module_common/loadingToast.js"),l=a("#g-page"),d=e("module_purchase/bid/bidDetail.html"),o=n();a.ajax({dataType:"json",url:"../../central/bidConsole/bidDetailData",data:{bidId:o,_t:(new Date).getTime()},success:function(e,i,t){r.hide();var n=s.template(d),a=n(e);l.empty(),l.append(a)},error:function(e,i,t){r.show("数据加载失败，请重新试试！")}})}),define("module_purchase/bid/bidDetail.html",[],function(e,i,t){t.exports='            <div class="g-header">\r\n                    <a href="bidListPage" class="u-back-left" ></a>\r\n                    <h3 class="u-title">竞价单[{{=it.bid.bidCode}}]</h3>\r\n            </div> \r\n            <div id="g-content" class="g-content">\r\n					                \r\n					<div class="m-bid" >\r\n					       <div class="txt-line">\r\n					         <label class="lab bid-time">竞价时间：</label>\r\n					         <div class="txt">\r\n					            <span >{{=new Date(it.bid.bidBeginTime).formatDate("yyyy-MM-dd HH:mm")}}<br/>至<br/>{{=new Date(it.bid.bidEndTime).formatDate("yyyy-MM-dd HH:mm")}}</span>\r\n					         </div>\r\n					       </div>\r\n					       <div class="txt-line">\r\n					         <label class="lab">可报次数：</label>\r\n					         <div class="txt">\r\n					            <span>{{=(it.bid.bidTime == 0 ?\'不限\':it.bid.bidTime) }}次</span>\r\n					         </div>\r\n					       </div>\r\n					       <div class="txt-line">\r\n					         <label class="lab">已报次数：</label>\r\n					         <div class="txt">\r\n					            <span> {{=it.quoteSn}}次</span>                \r\n					            <span class="ranking">上轮报价排名：\r\n					               {{=it.rankStr}}\r\n					            </span>\r\n					         </div>\r\n					       </div>\r\n					       <table class="m-bid-detail">\r\n					            <thead>\r\n					                <tr>\r\n					                    <th>商品信息</th>\r\n					                    <th>验货方式</th>\r\n					                    <th>重量信息</th>\r\n					                </tr>\r\n					            </thead>\r\n					            <tbody>\r\n					              {{~it.bid.listCentralBuyBidDetailVO : bd}}\r\n					                <tr>\r\n					                    <td>\r\n					                                                        品名：{{=bd.brandName}}<br/>\r\n					                                                        材质：{{=bd.textureName}}<br/>\r\n					                                                        规格：{{=bd.specification}}\r\n					                    </td>\r\n					                    <td>\r\n					                        {{=bd.meteringTypeName}}     \r\n					                    </td>\r\n					                    <td>计划量：{{=bd.planBuyWeight}}吨</td>\r\n					                </tr>\r\n					               {{~}} \r\n					            </tbody>\r\n					       </table>\r\n					       \r\n					       <div class="txt-line" style="margin-top: 10px;">\r\n					         <label class="lab" style="text-align: right;">总计：</label>\r\n					         <div class="txt">\r\n					            <span >计划量共{{=it.bid.bidTotalWeight }}吨</span>\r\n					         </div>\r\n					       </div>\r\n					</div>\r\n            </div>\r\n            <div id="g-footer" class="g-footer" >\r\n				 <div class="m-bid-footer" >\r\n				      {{?it.quoteSn>0}}\r\n				      <a href="../quote/toQuoteDetail?bidId={{=it.bid.bidId}}&quoteSn={{=it.quoteSn}}" class="weui_btn weui_btn_mini weui_btn_primary" >查看报价</a>\r\n				      {{?}}\r\n				      <a  href="bidDetailExtraPage?bidId={{=it.bid.bidId}}" class="weui_btn weui_btn_mini weui_btn_primary" >买方条款</a>\r\n				      {{?it.canQuote}}\r\n				      <a href="../quote/toQuote?bidId={{=it.bid.bidId}}" class="weui_btn weui_btn_mini weui_btn_primary" >参与报价</a>\r\n				      {{?}}\r\n				</div>\r\n            </div>\r\n'});